#include <iostream>
#include <graphics.h>
#include <math.h>

using namespace std;

// DDA Line Drawing Algorithm
void drawLineDDA(int x0, int y0, int x1, int y1, int style) {
    int dx = x1 - x0;
    int dy = y1 - y0;
    int steps = abs(dx) > abs(dy) ? abs(dx) : abs(dy);

    float Xinc = dx / (float)steps;
    float Yinc = dy / (float)steps;

    float x = x0, y = y0;

    for (int i = 0; i <= steps; i++) {
        int draw = 1;

        // Styles
        if (style == 2) { // Dotted
            if (i % 2 != 0)
                draw = 0;
        } else if (style == 3) { // Dashed
            if ((i / 5) % 2 == 1)
                draw = 0;
        }

        if (draw)
            putpixel(round(x), round(y), WHITE);

        x += Xinc;
        y += Yinc;
    }
}

// Bresenham's Line Drawing Algorithm
void drawLineBresenham(int x0, int y0, int x1, int y1, int style) {
    int dx = abs(x1 - x0);
    int dy = abs(y1 - y0);
    int sx = (x0 < x1) ? 1 : -1;
    int sy = (y0 < y1) ? 1 : -1;
    int err = dx - dy;
    int count = 0;

    while (true) {
        int draw = 1;

        // Styles
        if (style == 2) { // Dotted
            if (count % 2 != 0)
                draw = 0;
        } else if (style == 3) { // Dashed
            if ((count / 5) % 2 == 1)
                draw = 0;
        }

        if (draw)
            putpixel(x0, y0, WHITE);

        if (x0 == x1 && y0 == y1)
            break;

        int e2 = 2 * err;
        if (e2 > -dy) {
            err -= dy;
            x0 += sx;
        }
        if (e2 < dx) {
            err += dx;
            y0 += sy;
        }

        count++;
    }
}

int main() {
    int gd = DETECT, gm;
    initgraph(&gd, &gm, NULL);

    int algoChoice, styleChoice;
    int x0, y0, x1, y1;

    cout << "======== Line Drawing Algorithms ========\n";
    cout << "1. DDA Algorithm\n";
    cout << "2. Bresenham Algorithm\n";
    cout << "Enter your choice (1 or 2): ";
    cin >> algoChoice;

    cout << "\n======== Line Styles ========\n";
    cout << "1. Simple Line\n";
    cout << "2. Dotted Line\n";
    cout << "3. Dashed Line\n";
    cout << "4. Solid Line\n";
    cout << "Enter your choice (1-4): ";
    cin >> styleChoice;

    cout << "\nEnter starting point (x0, y0): ";
    cin >> x0 >> y0;

    cout << "Enter ending point (x1, y1): ";
    cin >> x1 >> y1;

    if (algoChoice == 1) {
        drawLineDDA(x0, y0, x1, y1, styleChoice);
    } else if (algoChoice == 2) {
        drawLineBresenham(x0, y0, x1, y1, styleChoice);
    } else {
        cout << "Invalid algorithm choice!\n";
    }

    getch();
    closegraph();
    return 0;
}